<!doctype html>

<head>

  <meta charset="utf-8">
  <title>Update The Big Announcement</title>

  <link href="https://fonts.googleapis.com/css2?family=Anton&display=swap" rel="stylesheet"> 
  <link href="https://fonts.googleapis.com/css2?family=Domine&display=swap" rel="stylesheet"> 
  
  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/style.css">

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <script src="js/ipfs.js"></script>
  <script src="js/web3.js"></script>
  <script src="js/contract.js"></script>
  <script src="js/update.js"></script>
</head>

<header>
  <div>
    <h1><span id="the">The</span> <span id="big">Big</span> Announcement</h1>
  </div>
</header>

<main>
  <div>

    <h1>Update The Big Announcement</h1>

    <div id="update-box">
      <p>
        Your message:
      </p>
      <p>
        <textarea id="msg-input" disabled></textarea>
      </p>
    </div>
    <div>
      <div id="show-box-price" align="left">
	<label>
	  Current price (in Eth):
	</label>
	<label id="show-current-price">
	  </label>
      </div>

      <div id="update-box-price">
      <label>
        Suggest price (in Eth):
      </label>
      <input type="text" id="price-input" disabled required></input>
      <label id="price-alarming" style="color: red">
      </label>
      </div>
    </div>
    <div>
      <p><button type="button" onclick="submit()" id="submit-button" value="disabled" disabled>Submit</button></p>
    </div>

    <div id="status-messages">
      <div id="status-ipfs-create">
        <div>
          <div>
            <p>Creating local IPFS node.</p>
          </div>
          <div class="status-progress">
            <span class="status-waiting"><img src="images/spinner.svg"/></span>
            <span class="status-success">☑</span>
            <span class="status-error">☒</span>
          </div>
        </div>
      </div>
      <div id="status-ipfs-store">
        <div>
          <div>
            <p>Storing message to IPFS.</p>
          </div>
          <div class="status-progress">
            <span class="status-waiting"><img src="images/spinner.svg"/></span>
            <span class="status-success">☑</span>
            <span class="status-error">☒</span>
          </div>
        </div>
        <div>
          <p>Content ID: <span id="status-ipfs-cid">(waiting)</span></p>
        </div>          
      </div>
      <div id="status-eth-wallet-connect">
        <div>
          <div>
            <p>Connecting to Ethereum wallet.</p>
          </div>
          <div class="status-progress">
            <span class="status-waiting"><img src="images/spinner.svg"/></span>
            <span class="status-success">☑</span>
            <span class="status-error">☒</span>
          </div>
        </div>
        <div>
          <p>Account: <span id="status-eth-account">(waiting)</span></p>
        </div>          
      </div>
      <div id="status-eth-transaction">
        <div>
          <div>
            <p>Storing message hash to Ethereum.</p>
          </div>
          <div class="status-progress">
            <span class="status-waiting"><img src="images/spinner.svg"/></span>
            <span class="status-success">☑</span>
            <span class="status-error">☒</span>
          </div>
        </div>
        <div>
          <p>Transaction hash: <span id="status-eth-tx-hash">(waiting)</span></p>
          <p>Confirmations: <span id="status-eth-confirmations">(waiting)</span></p>
        </div>
        <div class="status-error-msg"><p></p></div>
      </div>
      <div id="status-eth-complete">
        <div>
          <div>
            <p>Message upload complete.</p>
            <div>
              <button id="reload-button" onclick="loadMain()", type="button" value="disabled" disabled>Visit your Big Announcement</button>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
</main>

<footer>
  <div>
    <p>You can <a href="update.html" id="edit-link">edit</a> The Big Announcement.</p>
    <p>⁂</p>
    <p><a href="about.html">About this project.</a></p>
  </div>
</footer>
